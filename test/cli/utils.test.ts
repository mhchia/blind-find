import { expect } from "chai";
import { objToBase64, base64ToObj, pubkeyToHex, pubkeyFromHex } from "../../src/cli/utils";

describe("base64 encoding for JSON", () => {
  it("", () => {
    const hubRegistry = {
      sig: {
        R8: [
          BigInt(
            "16089961893952101599871784828975312424302163012628396317926481985320353654830"
          ),
          BigInt(
            "12381447172429670134010328761013080986059738221671943291817191349076161145712"
          )
        ],
        S: BigInt(
          "175883902717158849404357050894173038292431294950015769106229662169209622207"
        )
      },
      pubkey: [
        BigInt(
          "10085218219615481687279589137956304053623959550940724530641544648147365103845"
        ),
        BigInt(
          "19037066006425287173023581415506784596785190219828066715077685256047249479282"
        )
      ],
      adminAddress: BigInt("1320816249850685660514180836828158197007291650491")
    };
    const expectedB64 =
      "eyJzaWciOnsiUjgiOlsiMTYwODk5NjE4OTM5NTIxMDE1OTk4NzE3ODQ4Mjg5NzUzMTI0MjQzMDIxNjMwMTI2MjgzOTYzMTc5MjY0ODE5ODUzMjAzNTM2NTQ4MzAiLCIxMjM4MTQ0NzE3MjQyOTY3MDEzNDAxMDMyODc2MTAxMzA4MDk4NjA1OTczODIyMTY3MTk0MzI5MTgxNzE5MTM0OTA3NjE2MTE0NTcxMiJdLCJTIjoiMTc1ODgzOTAyNzE3MTU4ODQ5NDA0MzU3MDUwODk0MTczMDM4MjkyNDMxMjk0OTUwMDE1NzY5MTA2MjI5NjYyMTY5MjA5NjIyMjA3In0sInB1YmtleSI6WyIxMDA4NTIxODIxOTYxNTQ4MTY4NzI3OTU4OTEzNzk1NjMwNDA1MzYyMzk1OTU1MDk0MDcyNDUzMDY0MTU0NDY0ODE0NzM2NTEwMzg0NSIsIjE5MDM3MDY2MDA2NDI1Mjg3MTczMDIzNTgxNDE1NTA2Nzg0NTk2Nzg1MTkwMjE5ODI4MDY2NzE1MDc3Njg1MjU2MDQ3MjQ5NDc5MjgyIl0sImFkbWluQWRkcmVzcyI6IjEzMjA4MTYyNDk4NTA2ODU2NjA1MTQxODA4MzY4MjgxNTgxOTcwMDcyOTE2NTA0OTEifQ==";
    const actualB64 = objToBase64(hubRegistry);
    expect(actualB64).to.be.eql(expectedB64);
    const hubRegistryAgain = base64ToObj(actualB64);
    expect(hubRegistry).to.be.eql(hubRegistryAgain);
  });
});
